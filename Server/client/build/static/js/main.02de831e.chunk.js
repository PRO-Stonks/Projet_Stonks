(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{249:function(e,t,n){},253:function(e,t,n){},370:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(24),s=n.n(c),o=(n(249),n(11)),l=n(5),i=n.n(l),u=n(12),d=n(20),j=n.p+"static/media/stonks.1a260185.png",b=n(1);var h=function(e){return e.enabled?Object(b.jsx)("img",{src:j,className:"App-logo",alt:"logo"}):null},m="https://heig-vd-pro-stonks.herokuapp.com/api/v1/";var O=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())};function f(e,t){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var p=function(e){var t={};return e.email?O(e.email)||(t.email="Invalid email address"):t.email="Email cannot be empty",e.password?e.password.length<8&&(t.password="Password must have at least 8 character."):t.password="Password cannot be empty",t},v=function(e){var t=Object(d.e)({initialValues:{email:"",password:""},validate:p,onSubmit:function(){var n=Object(u.a)(i.a.mark((function n(r){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f(m+"users/login",r);case 2:"fail"===(a=n.sent).status?t.errors.submit=a.message:(console.log("Is ok"),e.handleChangeProps({loggedIn:!0,user:a.data.user,token:a.token}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return Object(b.jsxs)("form",{className:"container w-50",onSubmit:t.handleSubmit,children:[Object(b.jsx)("label",{className:"form-check-label",htmlFor:"email",children:"Email Address "}),Object(b.jsx)("input",{className:"form-control",id:"email",name:"email",type:"email",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.email}),t.touched.email&&t.errors.email?Object(b.jsx)("div",{className:"Error",children:t.errors.email}):"",Object(b.jsx)("label",{className:"form-check-label",htmlFor:"password",children:"Password "}),Object(b.jsx)("input",{className:"form-control",id:"password",name:"password",type:"password",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.password}),t.touched.password&&t.errors.password?Object(b.jsx)("div",{className:"Error",children:t.errors.password}):Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-primary",type:"submit",children:"Submit"}),Object(b.jsx)("br",{}),Object(b.jsx)(h,{enabled:t.isSubmitting}),t.errors.submit?Object(b.jsx)("div",{className:"Error",children:t.errors.submit}):Object(b.jsx)("br",{})]})},g=(n(253),n(29)),y=n(26),N="data:image/png;base64,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";var k=Object(y.f)((function(e){return Object(b.jsx)("div",{className:"navigationWelcome",children:Object(b.jsx)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)(g.b,{className:"navbar-brand",to:"/",children:[Object(b.jsx)("img",{src:N,alt:"logo"}),"   Stonks"]}),Object(b.jsx)("div",{children:Object(b.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(b.jsx)("li",{className:"nav-item ".concat("/"===e.location.pathname?"active":""),children:Object(b.jsxs)(g.b,{class:"nav-link",to:"/",children:["Home",Object(b.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(b.jsx)("li",{className:"nav-item ".concat("/about"===e.location.pathname?"active":""),children:Object(b.jsx)(g.b,{class:"nav-link",to:"/about",children:"About"})})]})})]})})})}));var w=Object(y.f)((function(e){return Object(b.jsx)("div",{className:"navigation",children:Object(b.jsx)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)(g.b,{class:"navbar-brand",to:"/",children:[Object(b.jsx)("img",{src:N,alt:"logo"})," Stonks"]}),Object(b.jsx)("div",{children:Object(b.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(b.jsx)("li",{className:"nav-item  ".concat("/"===e.location.pathname?"active":""),children:Object(b.jsxs)(g.b,{class:"nav-link",to:"/",children:["Home",Object(b.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(b.jsx)("li",{className:"nav-item  ".concat("/about"===e.location.pathname?"active":""),children:Object(b.jsx)(g.b,{class:"nav-link",to:"/about",children:"About"})})]})}),Object(b.jsx)("div",{children:Object(b.jsx)(g.b,{className:"btn btn-dark",onClick:e.handleLogOut,to:"/",children:"Log out"})})]})})})})),S=n.p+"static/media/stonks4.bc7d339b.png";var A=function(){return Object(b.jsx)("div",{className:"about",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"row align-items-center my-5",children:[Object(b.jsxs)("div",{className:"col-lg-7",children:[Object(b.jsx)("img",{src:S,className:"App-logo",alt:"logo"}),Object(b.jsx)("p",{className:"Logo-text-down",children:"Not Stonks"}),Object(b.jsx)("p",{className:"Logo-text-up",children:"Stonks"})]}),Object(b.jsxs)("div",{className:"col-lg-5",children:[Object(b.jsx)("h1",{className:"font-weight-light",children:"About"}),Object(b.jsx)("h4",{children:"Stonks project"}),Object(b.jsx)("p",{children:" For the HEIG-VD PRO course. "}),Object(b.jsxs)("p",{children:[" Authors:",Object(b.jsx)("br",{}),"Besseau L\xe9onard",Object(b.jsx)("br",{}),"Cerottini Alexandra",Object(b.jsx)("br",{}),"Do Vale Lopes Miguel",Object(b.jsx)("br",{}),"Gamboni Fiona",Object(b.jsx)("br",{}),"Tevaearai Rebecca"]})]})]})})})},C=n(79),L=n(80),P=n(40),E=n(31),B=n(120),Q=n(134),T=n(77),F=n(216),D=Object(F.a)("baseURL"),I=function(){function e(t){if(Object(C.a)(this,e),Object.defineProperty(this,D,{writable:!0,value:void 0}),this.constructor===e)throw new Error("Abstract classes can't be instantiated.");Object(T.a)(this,D)[D]=t}return Object(L.a)(e,[{key:"add",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Object(T.a)(this,D)[D]+"add",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Object(T.a)(this,D)[D]+n,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Object(T.a)(this,D)[D]+n,{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r)});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"softDelete",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Object(T.a)(this,D)[D]+n,{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"});case 3:return r=e.sent,e.abrupt("return",204===r.status?{status:"success"}:r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Object(T.a)(this,D)[D]+"hardDel/"+n,{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"});case 3:return r=e.sent,e.abrupt("return",204===r.status?{status:"success"}:r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),z=function(e){Object(B.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(C.a)(this,n),t.call(this,m+"products/")}return Object(L.a)(n,[{key:"add",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"add",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"get",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"getAll",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"update",this).call(this,t,r,a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"softDelete",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"softDelete",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"delete",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(I),H=n(430),V=n(412),J=n(426),R=n(407),Y=n(429),M=n(411),Z=n(420);var q=function(e){return Object(b.jsx)(a.a.Fragment,{children:Object(b.jsx)(R.a,{className:"col-3",style:{backgroundColor:"whitesmoke",textAlign:"center"},children:Object(b.jsxs)(Y.a,{children:[Object(b.jsx)(M.a,{style:{marginTop:10},children:"Action"}),Object(b.jsx)(Z.a,{id:"Action-select",select:!0,label:"Select",value:e.action,margin:"dense",onChange:function(t){e.setAction(t.target.value)},SelectProps:{native:!0},helperText:"none"===e.action?"Please select an Action !":"",variant:"outlined",error:"none"===e.action,children:["none","add","get all","update","softDelete","delete"].map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))})]})})})};var W=function(e){return Object(b.jsxs)("div",{className:"",children:[Object(b.jsx)("h3",{children:"Add a Product"}),Object(b.jsxs)("form",{className:"form-group",onSubmit:e.handler.handleSubmit,children:[Object(b.jsx)("label",{className:"form-check-label",children:"Name"}),Object(b.jsx)("input",{className:"form-control w-50",placeholder:"Name",id:"add_name",name:"name",type:"text",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.name}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",children:"Tag"}),Object(b.jsx)("textarea",{className:"form-control w-50 ",placeholder:"Tag",id:"add_tag",name:"tag",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.tag}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",children:"Low Quantity Threshold"}),Object(b.jsx)("input",{className:"form-control w-50",placeholder:"Low quantity threshold",id:"add_lowQuantity",name:"lowQuantity",type:"number",min:"0",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.lowQuantity}),Object(b.jsx)("br",{}),e.handler.errors.submit?Object(b.jsx)("div",{className:"Error",children:e.handler.errors.submit}):Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-success",type:"submit",children:"Submit"})]})]})},U=n(165),X=n(92),G=n(53);var K=function(e){var t=e.refetch,n=e.spinner,a=e.url,c=e.item,s=e.token,l=e.sort,i=e.queryOptions,u=Object(G.a)(e,["refetch","spinner","url","item","token","sort","queryOptions"]),d=Object(r.useState)(0),j=Object(o.a)(d,2),h=j[0],O=j[1],f=Object(r.useState)([]),x=Object(o.a)(f,2),p=x[0],v=x[1],g=Object(r.useState)(!0),y=Object(o.a)(g,2),N=y[0],k=y[1],w=Object(r.useState)(""),S=Object(o.a)(w,2),A=S[0],C=S[1],L=Object(r.useState)(10),P=Object(o.a)(L,2),E=P[0],B=P[1],Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;k(!0),fetch(T(e)+"&limit="+t+"&"+i,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(t){k(!1),"fail"===t.status?C(t.message):(E<10?(console.log("Missing: Removing "+E+" Element "),v((function(e){return[].concat(Object(X.a)(e.slice(0,e.length-E)),Object(X.a)(t.data))}))):v((function(e){return[].concat(Object(X.a)(e),Object(X.a)(t.data))})),t.results<10?B(t.results):O(e))})).catch((function(e){return C("an error occured")}))},T=function(e){return m+a+"?page=".concat(e)};Object(r.useEffect)((function(){Q(1)}),[t]);var F=n,D=c;return Object(b.jsxs)("div",{className:"List",children:[Object(b.jsx)("div",{className:"List-container",children:l?Object(X.a)(p).sort(l).map((function(e){return Object(b.jsx)(D,Object(U.a)({item:e},u),e._id)})):p.map((function(e){return Object(b.jsx)(D,Object(U.a)({item:e},u),e._id)}))}),Object(b.jsx)("div",{className:"interactions",children:!N&&Object(b.jsx)("button",{type:"button",onClick:function(){Q(h+1)},children:"More"})}),""!==A&&Object(b.jsx)("div",{className:"Error",children:A}),F&&Object(b.jsx)(F,{enable:N})]})};var _=function(e){var t=e.item;return t.active?Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)("label",{className:"form-check-label",children:"id"}),Object(b.jsx)("div",{className:"form-control w-50",children:t._id}),Object(b.jsx)("label",{className:"form-check-label",children:"name"}),Object(b.jsx)("div",{className:"form-control w-50",children:t.name}),Object(b.jsx)("label",{className:"form-check-label",children:"tag"}),Object(b.jsx)("textarea",{className:"form-control w-50 ",name:"tag",value:t.tag,disabled:!0}),Object(b.jsx)("label",{className:"form-check-label",children:"Low Quantity Threshold"}),Object(b.jsx)("textarea",{className:"form-control w-25 h-25",name:"lowQuantity",value:t.lowQuantity,disabled:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]}):""};var $=function(e){return Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)("h3",{children:"Get all Products"}),Object(b.jsx)(K,{token:e.token,item:_,spinner:h,url:"products"})]})};var ee=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),c=n[0],s=n[1];return Object(r.useEffect)((function(){e.handler.values.tag=e.selectedProduct.tag,e.handler.values.name=e.selectedProduct.name,s(!c)}),[e.selectedProduct]),Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)("h3",{children:"Update a Product"}),Object(b.jsxs)("form",{className:"form-group",onSubmit:e.handler.handleSubmit,children:[e.listProducts?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("select",{className:"custom-select w-50",onChange:e.handleSelect,children:[Object(b.jsx)("option",{selected:!0,children:"Select the id"}),e.listProducts.map((function(e,t){return e.active?Object(b.jsx)("option",{value:t,children:e._id},t):""}))]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),e.selectedProduct.id?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{className:"form-check-label",children:"Name"}),Object(b.jsx)("input",{className:"form-control w-50",id:"add_name",name:"name",type:"text",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.name}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",children:"Tag"}),Object(b.jsx)("textarea",{className:"form-control w-50 ",id:"add_tag",name:"tag",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.tag}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",children:"Low Quantity Threshold"}),Object(b.jsx)("input",{className:"form-control w-50",placeholder:"Low quantity threshold",id:"add_lowQuantity",name:"lowQuantity",type:"number",min:"0",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.lowQuantity})]}):""]}):Object(b.jsx)("error",{children:"Could not fetch data"}),e.handler.errors.submit?Object(b.jsx)("div",{className:"Error",children:e.handler.errors.submit}):Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-success",type:"submit",children:"Submit"})]})]})};var te=function(e){return Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)("h3",{children:e.title}),Object(b.jsxs)("form",{className:"form-group",onSubmit:e.handler.handleSubmit,children:[e.listProducts?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("select",{className:"custom-select w-50",onChange:e.handleSelect,children:[Object(b.jsx)("option",{selected:!0,children:"Select the name"}),e.listProducts.map((function(t,n){return e.filter&&!t.active?"":Object(b.jsx)("option",{value:n,children:t.name},n)}))]}),Object(b.jsx)("br",{}),e.selectedProduct.id?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",children:"id"}),Object(b.jsx)("div",{className:"form-control w-50",children:e.selectedProduct.id}),Object(b.jsx)("br",{})]}):""]}):Object(b.jsx)("error",{children:"Could not fetch data"}),e.handler.errors.submit?Object(b.jsx)("div",{className:"Error",children:e.handler.errors.submit}):Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-danger",type:"submit",children:"Submit"})]})]})};var ne=function(e){var t=new z,n={add:Object(d.e)({initialValues:{name:"",tag:"",lowQuantity:0},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.add(e.token,a);case 2:"success"===(c=r.sent).status?(console.log("Product added"),alert("The product: "+JSON.stringify(c.data.name)+" has correctly been added")):n.add.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),get:Object(d.e)({initialValues:{id:""},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get(e.token,a.id);case 2:"success"===(c=r.sent).status?(console.log("Product got"),alert("Product requested:\n"+JSON.stringify(c.data))):n.get.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),getAll:Object(d.e)({initialValues:{queryString:""},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getAll(e.token,a.queryString);case 2:"success"===(c=r.sent).status?(console.log("All Products got"),alert("All products:\n"+JSON.stringify(c.data))):n.getAll.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),update:Object(d.e)({initialValues:{name:"",tag:"",lowQuantity:0},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.update(e.token,f.id,{name:a.name,tag:a.tag,lowQuantity:a.lowQuantity});case 2:"success"===(c=r.sent).status?(console.log("Product updated"),alert("This is the updated product:\n"+JSON.stringify(c.data)+"\nPlease reload the page to see the changes.")):n.update.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),sofDelete:Object(d.e)({initialValues:{},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.softDelete(e.token,f.id);case 2:"success"===(c=r.sent).status?(console.log("Product soft deleted"),alert("The product was soft deleted but still can be seen.")):n.sofDelete.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),delete:Object(d.e)({initialValues:{},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.delete(e.token,f.id);case 2:"success"===(c=r.sent).status?(console.log("Product soft deleted"),alert("The product was deleted, please refresh the page.")):n.sofDelete.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})},c=Object(r.useState)({fetching:!1,data:""}),s=Object(o.a)(c,2),l=s[0],j=s[1];Object(r.useEffect)((function(){function n(){return(n=Object(u.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getAll(e.token,"");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}l.fetching&&function(){return n.apply(this,arguments)}().then((function(e){j({data:e.data,fetching:l.fetching})}))}),[l.fetching]);var h=function(e){var t=e.target.value;Object(d.d)(t)?x({id:l.data[t]._id,tag:l.data[t].tag,name:l.data[t].name}):x({id:"",tag:"",name:""})},m=Object(r.useState)({id:"",tag:"",name:""}),O=Object(o.a)(m,2),f=O[0],x=O[1],p=Object(r.useState)(0),v=Object(o.a)(p,2),g=v[0],y=v[1],N=a.a.useState("none"),k=Object(o.a)(N,2),w=k[0],S=k[1];return Object(b.jsx)(a.a.Fragment,{children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h2",{children:"Product management"}),Object(b.jsx)(H.a,{className:"container bg-dark",activeStep:g,children:["Action","Details"].map((function(e,t){return Object(b.jsx)(V.a,{children:Object(b.jsx)(J.a,{children:e})},e)}))}),Object(b.jsx)("br",{}),g?Object(b.jsxs)("center",{children:[function(t){switch(t){case"add":return Object(b.jsx)(W,{handler:n.add});case"get all":return Object(b.jsx)($,{token:e.token});case"update":return l.fetching||(l.fetching=!0),Object(b.jsx)(ee,{handler:n.update,handleSelect:h,listProducts:l.data,selectedProduct:f,baseHandlerValue:"o"});case"softDelete":return l.fetching||(l.fetching=!0),Object(b.jsx)(te,{title:"Soft delete a Product",handler:n.sofDelete,handleSelect:h,listProducts:l.data,filter:!0,selectedProduct:f});case"delete":return l.fetching||(l.fetching=!0),Object(b.jsx)(te,{title:"Delete a Product",handler:n.delete,handleSelect:h,listProducts:l.data,selectedProduct:f});default:return Object(b.jsx)("div",{className:"Error",children:"Selected action not Found"})}}(w),Object(b.jsx)("br",{}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"btn-secondary",onClick:function(){l.fetching=!1,x({id:"",tag:"",name:""}),y(g-1)},children:"BACK"})})]}):Object(b.jsxs)("center",{children:[Object(b.jsx)(q,{action:w,setAction:S}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{hidden:"none"===w,className:"btn-secondary",onClick:function(){y(g+1)},children:"NEXT"})]})]})})},re=n(220),ae=n.n(re),ce=n(258);function se(e){var t=Object(r.useRef)();return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{ref:t,children:e.codes.map((function(e){return Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)(ce,{value:e,includeMargin:"true"}),"\xa0\xa0"]})}))}),Object(b.jsx)(ae.a,{trigger:function(){return Object(b.jsx)("button",{className:"btn-secondary",children:"Click To Print"})},content:function(){return t.current}})]})}var oe=n(413),le=n(414);function ie(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m+"QR/add",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},redirect:"follow",referrerPolicy:"no-referrer"});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function de(){return(de=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m+"QR/",{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"});case 3:return n=e.sent,e.abrupt("return",204===n.status?{status:"success"}:n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var je=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),a=n[0],c=n[1],s=Object(d.e)({initialValues:{nbQr:0},onSubmit:function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.nbQr<1||n.nbQr>12)){t.next=4;break}s.errors.submit="Requested number of QR to generate belongs to [1, 12]",t.next=5;break;case 4:return t.delegateYield(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],a=0;case 2:if(!(a<n.nbQr)){t.next=8;break}return t.next=5,ie(e.token).then((function(e){r.push(e.data.code)}));case 5:++a,t.next=2;break;case 8:c(r);case 9:case"end":return t.stop()}}),t)}))(),"t0",5);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h2",{children:"QR management"}),Object(b.jsx)("br",{}),Object(b.jsxs)(oe.a,{children:[Object(b.jsxs)(le.a,{children:[Object(b.jsx)("h4",{children:"Generate"}),Object(b.jsxs)("div",{className:"container w-50",children:[Object(b.jsx)("label",{className:"form-check-label",children:"Enter the number"}),Object(b.jsxs)("form",{className:"form-group",onSubmit:s.handleSubmit,children:[Object(b.jsx)("input",{className:"form-control",placeholder:"Number of QR",id:"nbQr",name:"nbQr",type:"number",value:s.values.nbQr,min:"1",max:"12",onChange:s.handleChange,onBlur:s.handleBlur}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-success",type:"submit",children:"Submit"})]})]}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"container-fluid",children:a.length?Object(b.jsx)(se,{codes:a}):""})]}),Object(b.jsxs)(le.a,{children:[Object(b.jsx)("h4",{children:"Clear All"}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-danger",onClick:function(){(function(e){return de.apply(this,arguments)})(e.token).then((function(){return alert("All QR have been deleted")}))},children:"Delete"})]})]})]})};var be=function(e){var t=e.item,n=e.onSelect;return t.active?Object(b.jsxs)("div",{className:"UserSelection",onClick:function(){return n(t)},children:[t.lastName," ",t.firstName,", ",t.email]}):Object(b.jsxs)("div",{className:"text-secondary",onClick:function(){return n(t)},children:[t.lastName," ",t.firstName,", ",t.email]})},he=n(415),me=n(416);function Oe(e,t,n){return fe.apply(this,arguments)}function fe(){return(fe=Object(u.a)(i.a.mark((function e(t,n,r){var a,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>3&&void 0!==s[3]?s[3]:"POST",e.prev=1,e.next=4,fetch(t,{method:a,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c.json());case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var xe=function(e){var t={};return e.email?O(e.email)||(t.email="Invalid email address"):t.email="Email cannot be empty",e.password&&e.password.length>0&&e.password.length<8&&(t.password="Password must have at least 8 character."),e.firstName||(t.firstName="First name cannot be empty"),e.lastName||(t.lastName="Last name cannot be empty"),t};function pe(e,t){var n={};return e.firstName!==t.firstName&&(n.firstName=t.firstName),e.firstName!==t.firstName&&(n.firstName=t.firstName),e.lastName!==t.lastName&&(n.lastName=t.lastName),e.role!==t.role&&(n.role=t.role),e.email!==t.email&&(n.email=t.email),t.password&&t.password.length>8&&(n.password=t.password),console.log("Changes"),console.log(n),n}var ve=function(e){return Object(b.jsx)(d.c,{initialValues:e.userData,validate:xe,onSubmit:function(){var t=Object(u.a)(i.a.mark((function t(n,r){var a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("update"!==e.action){t.next=7;break}return c=pe(e.userData,n),t.next=4,Oe(m+"users/"+e.userData.id,c,e.token,"PATCH");case 4:a=t.sent,t.next=11;break;case 7:if("add"!==e.action){t.next=11;break}return t.next=10,Oe(m+"users/signup",n,e.token);case 10:a=t.sent;case 11:"fail"===a.status?r.setFieldError("submit",a.message):e.refreshHandler(a.data);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){return Object(b.jsxs)(d.b,{children:[Object(b.jsx)("label",{className:"form-check-label",htmlFor:"firstName",children:"First name "}),Object(b.jsx)(d.a,{className:"form-control",id:"firstName",name:"firstName",type:"text",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.firstName}),e.touched.firstName&&e.errors.firstName?Object(b.jsx)("div",{className:"Error",children:e.errors.firstName}):Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"lastName",children:"Last name "}),Object(b.jsx)(d.a,{className:"form-control",id:"lastName",name:"lastName",type:"text",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.lastName}),e.touched.lastName&&e.errors.lastName?Object(b.jsx)("div",{className:"Error",children:e.errors.lastName}):Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"email",children:"Email Address "}),Object(b.jsx)(d.a,{className:"form-control",id:"email",name:"email",type:"email",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.email}),e.touched.email&&e.errors.email?Object(b.jsx)("div",{className:"Error",children:e.errors.email}):Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"password",children:"Password "}),Object(b.jsx)(d.a,{className:"form-control",id:"password",name:"password",type:"password",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.password}),e.touched.password&&e.errors.password?Object(b.jsx)("div",{className:"Error",children:e.errors.password}):Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"role",children:"Role "}),Object(b.jsxs)(d.a,{className:"custom-select",as:"select",id:"role",name:"role",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.role,children:[Object(b.jsx)("option",{value:"manager",children:"Manager"}),Object(b.jsx)("option",{value:"admin",children:"Admin"})]}),e.touched.firstName&&e.errors.firstName?Object(b.jsx)("div",{className:"Error",children:e.errors.firstName}):Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",children:"Submit"}),Object(b.jsx)(h,{enabled:e.isSubmitting}),e.errors.submit?Object(b.jsx)("div",{className:"Error",children:e.errors.submit}):Object(b.jsx)("br",{})]})}})};function ge(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",fetch(t,{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},redirect:"follow",referrerPolicy:"no-referrer"}));case 4:e.prev=4,e.t0=e.catch(0),console.log(e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}var Ne=function(e){var t=e.user,n=e.token,a=e.refreshHandler,c=e.formRefresh,s=e.deleteHandler,l=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(m+"users/"+t._id,n);case 2:if(204===(r=e.sent).status){e.next=9;break}return e.next=6,r.json();case 6:console.log(r.message),e.next=10;break;case 9:a();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(m+"users/hardDel/"+t._id,n);case 2:if(r=e.sent,console.log(r),204===r.status){e.next=10;break}return e.next=7,r.json();case 7:console.log(r.message),e.next=12;break;case 10:console.log("Calling handler"),s();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=Object(r.useState)(!1),h=Object(o.a)(j,2),O=h[0],f=h[1];return Object(r.useEffect)((function(){O&&f(!1)}),[t]),t?Object(b.jsxs)(he.a,{fluid:!0,children:[Object(b.jsxs)(oe.a,{children:[Object(b.jsx)(le.a,{md:3,style:ke,children:"Role"}),Object(b.jsx)(le.a,{md:3,style:ke,children:"Email"}),Object(b.jsx)(le.a,{md:3,style:ke,children:"First name"}),Object(b.jsx)(le.a,{md:3,style:ke,children:"Last name"})]}),Object(b.jsxs)(oe.a,{children:[Object(b.jsx)(le.a,{md:3,children:t.role}),Object(b.jsx)(le.a,{md:3,children:t.email}),Object(b.jsx)(le.a,{md:3,children:t.firstName}),Object(b.jsx)(le.a,{md:3,children:t.lastName})]}),Object(b.jsx)("br",{}),Object(b.jsxs)(oe.a,{children:[Object(b.jsx)(le.a,{children:Object(b.jsx)(me.a,{variant:"warning",onClick:l,children:"Disable"})}),Object(b.jsx)(le.a,{children:Object(b.jsx)(me.a,{variant:"success",onClick:function(){f(!0)},children:"Update"})}),Object(b.jsx)(le.a,{children:Object(b.jsx)(me.a,{variant:"danger",onClick:d,children:"Delete"})})]}),Object(b.jsx)("br",{}),O?Object(b.jsx)(oe.a,{className:"justify-content-md-center",children:Object(b.jsx)(ve,{userData:{id:t._id,firstName:t.firstName,lastName:t.lastName,email:t.email,role:t.role},action:"update",token:n,refreshHandler:c})}):""]}):Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:"Add"}),Object(b.jsx)(ve,{userData:{firstName:"",lastName:"",email:"",password:"",role:"manager"},action:"add",token:n,refreshHandler:a})]})},ke={fontWeight:"bold",borderBottom:"2px solid",paddingBottom:"2px"};var we=function(e){var t=Object(r.useState)(null),n=Object(o.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),l=Object(o.a)(s,2),i=l[0],u=l[1],d=function(){u(!i)};return Object(b.jsxs)(he.a,{fluid:!0,children:[Object(b.jsx)("h2",{children:"User management"}),Object(b.jsx)("br",{}),Object(b.jsxs)(oe.a,{children:[Object(b.jsx)(le.a,{children:Object(b.jsx)(K,{token:e.token,item:be,spinner:h,url:"users",onSelect:function(e){console.log("Selected"),console.log(e),c(a&&e._id===a._id?null:e)},sort:function(e,t){return function(e,t){return e.active&&!t.active?-1:!e.active&&t.active?1:0}(e,t)||e.role.localeCompare(t.role)||e.lastName.localeCompare(t.lastName)||e.firstName.localeCompare(t.firstName)},refetch:i})}),Object(b.jsx)(le.a,{children:Object(b.jsx)(Ne,{user:a,token:e.token,refreshHandler:d,formRefresh:function(e){d(),c(e)},deleteHandler:function(){console.log("In delete handler"),u(!i),c(null)}})})]})]})},Se=function(e){Object(B.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(C.a)(this,n),t.call(this,m+"locations/")}return Object(L.a)(n,[{key:"add",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"add",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"get",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"getAll",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"update",this).call(this,t,r,a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"softDelete",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"softDelete",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(P.a)(Object(E.a)(n.prototype),"delete",this).call(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(I);var Ae=function(e){return Object(b.jsxs)("div",{className:"",children:[Object(b.jsx)("h3",{children:"Add a Location"}),Object(b.jsxs)("form",{className:"form-group",onSubmit:e.handler.handleSubmit,children:[Object(b.jsx)("input",{className:"form-control w-50",placeholder:"Name",id:"add_name",name:"name",type:"text",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.name}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"Street",id:"add_street",name:"street",type:"text",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.street}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"Street number",id:"add_noStreet",name:"noStreet",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.noStreet}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"NPA",id:"add_npa",name:"npa",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.npa}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"City",id:"add_city",name:"city",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.city}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"Country",id:"add_country",name:"country",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.country}),e.handler.errors.submit?Object(b.jsx)("div",{className:"Error",children:e.handler.errors.submit}):Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-success",type:"submit",children:"Submit"})]})]})};var Ce=function(e){var t=e.item;return t.active?Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)("label",{className:"form-check-label",children:"id"}),Object(b.jsx)("div",{className:"form-control w-50",children:t._id}),Object(b.jsx)("label",{className:"form-check-label",children:"name"}),Object(b.jsx)("div",{className:"form-control w-50",children:t.name}),Object(b.jsx)("label",{className:"form-check-label",children:"address"}),Object(b.jsx)("textarea",{className:"form-control w-50 ",name:"address",value:t.address.street+" "+t.address.noStreet+"\n"+t.address.npa+" "+t.address.city+"\n"+t.address.country,disabled:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]}):""};var Le=function(e){return Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)("h3",{children:"Get all Locations"}),Object(b.jsx)(K,{token:e.token,item:Ce,spinner:h,url:"locations"})]})};var Pe=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),c=n[0],s=n[1];return Object(r.useEffect)((function(){e.handler.values.name=e.selectedLocation.name,e.handler.values.street=e.selectedLocation.address.street,e.handler.values.noStreet=e.selectedLocation.address.noStreet,e.handler.values.npa=e.selectedLocation.address.npa,e.handler.values.city=e.selectedLocation.address.city,e.handler.values.country=e.selectedLocation.address.country,s(!c)}),[e.selectedLocation]),Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)("h3",{children:"Update a Location"}),Object(b.jsxs)("form",{className:"form-group",onSubmit:e.handler.handleSubmit,children:[e.listLocations?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("select",{className:"custom-select w-50",onChange:e.handleSelect,children:[Object(b.jsx)("option",{selected:!0,children:"Select the id"}),e.listLocations.map((function(e,t){return e.active?Object(b.jsx)("option",{value:t,children:e._id},t):""}))]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),e.selectedLocation.id?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{className:"form-check-label",children:"Name"}),Object(b.jsx)("input",{className:"form-control w-50",id:"add_name",name:"name",type:"text",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.name}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",children:"Street"}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"Street",id:"add_street",name:"street",type:"text",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.street}),Object(b.jsx)("label",{className:"form-check-label",children:"Street number"}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"Street number",id:"add_noStreet",name:"noStreet",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.noStreet}),Object(b.jsx)("label",{className:"form-check-label",children:"NPA"}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"NPA",id:"add_npa",name:"npa",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.npa}),Object(b.jsx)("label",{className:"form-check-label",children:"City"}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"City",id:"add_city",name:"city",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.city}),Object(b.jsx)("label",{className:"form-check-label",children:"Country"}),Object(b.jsx)("input",{className:"form-control w-50 ",placeholder:"Country",id:"add_country",name:"country",onChange:e.handler.handleChange,onBlur:e.handler.handleBlur,value:e.handler.values.country})]}):""]}):Object(b.jsx)("error",{children:"Could not fetch data"}),e.handler.errors.submit?Object(b.jsx)("div",{className:"Error",children:e.handler.errors.submit}):Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-success",type:"submit",children:"Submit"})]})]})};var Ee=function(e){return Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)("h3",{children:e.title}),Object(b.jsxs)("form",{className:"form-group",onSubmit:e.handler.handleSubmit,children:[e.listLocations?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("select",{className:"custom-select w-50",onChange:e.handleSelect,children:[Object(b.jsx)("option",{selected:!0,children:"Select the name"}),e.listLocations.map((function(t,n){return e.filter&&!t.active?"":Object(b.jsx)("option",{value:n,children:t.name},n)}))]}),Object(b.jsx)("br",{}),e.selectedLocation.id?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",children:"id"}),Object(b.jsx)("div",{className:"form-control w-50",children:e.selectedLocation.id}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{className:"form-check-label",children:"address"}),Object(b.jsx)("textarea",{className:"form-control w-50 ",name:"address",value:e.selectedLocation.address.street+" "+e.selectedLocation.address.noStreet+"\n"+e.selectedLocation.address.npa+" "+e.selectedLocation.address.city+"\n"+e.selectedLocation.address.country,disabled:!0})]}):""]}):Object(b.jsx)("error",{children:"Could not fetch data"}),e.handler.errors.submit?Object(b.jsx)("div",{className:"Error",children:e.handler.errors.submit}):Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn-danger",type:"submit",children:"Submit"})]})]})};var Be=function(e){var t=new Se,n={add:Object(d.e)({initialValues:{name:"",street:"",noStreet:"",npa:"",city:"",country:""},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.add(e.token,{name:a.name,address:{street:a.street,noStreet:a.noStreet,npa:a.npa,city:a.city,country:a.country}});case 2:"success"===(c=r.sent).status?(console.log("Location added"),alert("The location: "+JSON.stringify(c.data.name)+" has correctly been added")):n.add.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),get:Object(d.e)({initialValues:{id:""},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get(e.token,a.id);case 2:"success"===(c=r.sent).status?(console.log("Location got"),alert("Location requested:\n"+JSON.stringify(c.data))):n.get.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),getAll:Object(d.e)({initialValues:{queryString:""},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getAll(e.token,a.queryString);case 2:"success"===(c=r.sent).status?(console.log("All Locations got"),alert("All locations:\n"+JSON.stringify(c.data))):n.getAll.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),update:Object(d.e)({initialValues:{name:"",street:"",noStreet:"",npa:"",city:"",country:""},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.update(e.token,f.id,{name:a.name,address:{street:a.street,noStreet:a.noStreet,npa:a.npa,city:a.city,country:a.country}});case 2:"success"===(c=r.sent).status?(console.log("Location updated"),alert("This is the updated location:\n"+JSON.stringify(c.data)+"\nPlease reload the page to see the changes.")):n.update.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),sofDelete:Object(d.e)({initialValues:{},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.softDelete(e.token,f.id);case 2:"success"===(c=r.sent).status?(console.log("Location soft deleted"),alert("The location was soft deleted but still can be seen.")):n.sofDelete.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}),delete:Object(d.e)({initialValues:{},onSubmit:function(){var r=Object(u.a)(i.a.mark((function r(a){var c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.delete(e.token,f.id);case 2:"success"===(c=r.sent).status?(console.log("Location soft deleted"),alert("The location was deleted, please refresh the page.")):n.sofDelete.errors.submit=c.message;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})},c=Object(r.useState)({fetching:!1,data:""}),s=Object(o.a)(c,2),l=s[0],j=s[1];Object(r.useEffect)((function(){function n(){return(n=Object(u.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getAll(e.token,"");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}l.fetching&&function(){return n.apply(this,arguments)}().then((function(e){j({data:e.data,fetching:l.fetching})}))}),[l.fetching]);var h=function(e){var t=e.target.value;Object(d.d)(t)?x({id:l.data[t]._id,name:l.data[t].name,address:l.data[t].address}):x({id:"",name:"",address:{street:"",noStreet:"",npa:"",city:"",country:""}})},m=Object(r.useState)({id:"",name:"",address:{street:"",noStreet:"",npa:"",city:"",country:""}}),O=Object(o.a)(m,2),f=O[0],x=O[1],p=Object(r.useState)(0),v=Object(o.a)(p,2),g=v[0],y=v[1],N=a.a.useState("none"),k=Object(o.a)(N,2),w=k[0],S=k[1];return Object(b.jsx)(a.a.Fragment,{children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h2",{children:"Location management"}),Object(b.jsx)(H.a,{className:"container bg-dark",activeStep:g,children:["Action","Details"].map((function(e,t){return Object(b.jsx)(V.a,{children:Object(b.jsx)(J.a,{children:e})},e)}))}),Object(b.jsx)("br",{}),g?Object(b.jsxs)("center",{children:[function(t){switch(t){case"add":return Object(b.jsx)(Ae,{handler:n.add});case"get all":return Object(b.jsx)(Le,{token:e.token});case"update":return l.fetching||(l.fetching=!0),Object(b.jsx)(Pe,{handler:n.update,handleSelect:h,listLocations:l.data,selectedLocation:f});case"softDelete":return l.fetching||(l.fetching=!0),Object(b.jsx)(Ee,{title:"Soft delete a Location",handler:n.sofDelete,handleSelect:h,listLocations:l.data,filter:!0,selectedLocation:f});case"delete":return l.fetching||(l.fetching=!0),Object(b.jsx)(Ee,{title:"Delete a Location",handler:n.delete,handleSelect:h,listLocations:l.data,selectedLocation:f});default:return Object(b.jsx)("div",{className:"Error",children:"Selected action not Found"})}}(w),Object(b.jsx)("br",{}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"btn-secondary",onClick:function(){l.fetching=!1,x({id:"",name:"",address:{street:"",noStreet:"",npa:"",city:"",country:""}}),y(g-1)},children:"BACK"})})]}):Object(b.jsxs)("center",{children:[Object(b.jsx)(q,{action:w,setAction:S}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{hidden:"none"===w,className:"btn-secondary",onClick:function(){y(g+1)},children:"NEXT"})]})]})})},Qe=n(422),Te=n(419);var Fe=function(e){var t=e.item,n=e.onSelect;return Object(b.jsx)("div",{className:"LocationList",onClick:function(){return n(t)},children:t.name})};var De=function(e){var t=e.item,n=(e.onSelect,new Date(t.entryDate));return t.active?Object(b.jsxs)("div",{className:"LocationList",children:["Price ",t.price," | Entry Date: ",n.toLocaleString("en-gb",{year:"numeric",month:"numeric",day:"numeric"})]}):null},Ie=n(64);var ze=function(e){var t=e.locationId,n=e.token,a=(Object(G.a)(e,["locationId","token"]),Object(r.useState)([])),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(r.useState)(!0),u=Object(o.a)(i,2),d=u[0],j=u[1],O=Object(r.useState)(""),f=Object(o.a)(O,2),x=f[0],p=f[1];return Object(r.useEffect)((function(){fetch(m+"elements/local/"+t,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){j(!1),"fail"===e.status?p(e.message):l(Object(Ie.groupBy)(e.data,(function(e){return e.idProduct._id})))})).catch((function(e){return p("an error occured")}))}),[t]),x?Object(b.jsx)("div",{className:"Error",children:x}):d?Object(b.jsx)(h,{enable:d}):Object.keys(s).length>0?Object.keys(s).map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:s[e][0].idProduct.name}),s[e].map((function(e){return Object(b.jsx)(De,{item:e},e._id)}))," "]},e)})):Object(b.jsx)("h3",{children:"No element in this site"})};var He=function(e){var t=e.token,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],s=a[1];return Object(b.jsxs)(he.a,{fluid:!0,children:[Object(b.jsx)("br",{}),Object(b.jsxs)(oe.a,{children:[Object(b.jsxs)(le.a,{children:[Object(b.jsx)("h2",{children:"Location Selection"}),Object(b.jsx)(K,{token:t,item:Fe,spinner:h,url:"locations",onSelect:function(e){s(c&&e._id===c._id?null:e)},sort:function(e,t){return e.name.localeCompare(t.name)}})]}),Object(b.jsx)(le.a,{children:c&&Object(b.jsx)(ze,{token:t,locationId:c._id})})]})]})};var Ve=function(e){var t=e.item,n=e.onSelect;return Object(b.jsx)("div",{className:"LocationList",onClick:function(){return n(t)},children:t.name})};var Je=function(e){var t=e.item,n=(e.onSelect,new Date(t.entryDate));return t.active?Object(b.jsxs)("div",{className:"ProductList",children:["Price ",t.price," | Entry Date: ",n.toLocaleString("en-gb",{year:"numeric",month:"numeric",day:"numeric"})]}):null};var Re=function(e){var t=e.productId,n=e.token,a=(Object(G.a)(e,["productId","token"]),Object(r.useState)([])),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(r.useState)([]),u=Object(o.a)(i,2),d=u[0],j=u[1],O=Object(r.useState)(!0),f=Object(o.a)(O,2),x=f[0],p=f[1],v=Object(r.useState)(""),g=Object(o.a)(v,2),y=g[0],N=g[1];return Object(r.useEffect)((function(){fetch(m+"elements/product/"+t,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){p(!1),"fail"===e.status?N(e.message):(j(e.data.filter((function(e){return e.active}))),l(Object(Ie.groupBy)(e.data,(function(e){return e.idLocation||console.log(e),e.idLocation._id}))))})).catch((function(e){console.log(e),N("an error occured")}))}),[t]),y?Object(b.jsx)("div",{className:"Error",children:y}):x?Object(b.jsx)(h,{enable:x}):Object.keys(s).length>0?Object(b.jsxs)("div",{children:[Object(b.jsxs)("h2",{children:["In stock: ",d.length]}),Object.keys(s).map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:s[e][0].idLocation.name}),s[e].map((function(e){return Object(b.jsx)(Je,{item:e},e._id)}))," "]},e)}))]}):Object(b.jsx)("h3",{children:"No element for this product"})};var Ye=function(e){var t=e.token,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],s=a[1];return Object(b.jsxs)(he.a,{fluid:!0,children:[Object(b.jsx)("br",{}),Object(b.jsxs)(oe.a,{children:[Object(b.jsxs)(le.a,{children:[Object(b.jsx)("h2",{children:"Products Selection"}),Object(b.jsx)(K,{token:t,item:Ve,spinner:h,url:"products",onSelect:function(e){s(c&&e._id===c._id?null:e)},sort:function(e,t){return e.name.localeCompare(t.name)}})]}),Object(b.jsx)(le.a,{children:c&&Object(b.jsx)(Re,{token:t,productId:c._id})})]})]})};var Me=function(e){var t=e.item,n=e.onSelect;return Object(b.jsx)("div",{className:"LocationList",onClick:function(){return n(t)},children:t.name})},Ze=n(425),qe=n(433),We=n(435),Ue=n(423);var Xe=function(e){var t=e.productId,n=e.token,a=(Object(G.a)(e,["productId","token"]),Object(r.useState)([])),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(r.useState)([]),u=Object(o.a)(i,2),d=u[0],j=u[1],O=Object(r.useState)(!0),f=Object(o.a)(O,2),x=f[0],p=f[1],v=Object(r.useState)(""),g=Object(o.a)(v,2),y=g[0],N=g[1];if(Object(r.useEffect)((function(){fetch(m+"events/element/product/"+t,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},redirect:"follow",referrerPolicy:"no-referrer"}).then((function(e){return e.json()})).then((function(e){p(!1),"fail"===e.status?N(e.message):(j(e.data),l(Object(Ie.groupBy)(e.data,(function(e){return e.change}))))})).catch((function(e){console.log(e),N("an error occured")}))}),[t]),y)return Object(b.jsx)("div",{className:"Error",children:y});if(x)return Object(b.jsx)(h,{enable:x});var k=s.Creation?s.Creation.length:0,w=s.Move?s.Move.length:0,S=s.Remove?s.Remove.length:0,A=d.map((function(e){return e.time=new Date(e.time).setHours(0,0,0,0),e})),C=Object(Ie.groupBy)(A,(function(e){return e.change}));return Object.keys(C).forEach((function(e){C[e]=Object(Ie.groupBy)(C[e],(function(e){return e.time})),Object.keys(C[e]).forEach((function(t){C[e][t]={value:C[e][t].length,date:new Date(parseInt(t))}}))})),Object.keys(s).length>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h3",{children:["Current quantity: ",k-S]}),Object(b.jsxs)("h3",{children:["Element added: ",k]}),s.Remove&&Object(b.jsxs)("h3",{children:["Element removed: ",S]}),s.Move&&Object(b.jsxs)("h3",{children:["Element moved: ",w]}),Object(b.jsxs)(Ze.a,{children:[Object(b.jsx)(qe.a,{tickFormat:function(e){return new Date(e).toLocaleString("en-gb",{year:"numeric",month:"numeric",day:"numeric"})}}),Object(b.jsxs)(We.a,{children:[C.Creation&&Object(b.jsx)(Ue.a,{data:Object.values(C.Creation),x:"date",y:"value",style:{data:{fill:"#18ff00",fillOpacity:.7,strokeWidth:3},labels:{fontSize:15,fill:"#c43a31"}}}),C.Remove&&Object(b.jsx)(Ue.a,{data:Object.values(C.Remove),x:"date",y:"value",style:{data:{fill:"#ff0000",fillOpacity:.7,strokeWidth:3},labels:{fontSize:15,fill:"#c43a31"}}}),C.Move&&Object(b.jsx)(Ue.a,{data:Object.values(C.Move),x:"date",y:"value",style:{data:{fill:"#ffbf00",fillOpacity:.7,strokeWidth:3},labels:{fontSize:15,fill:"#c43a31"}}})]})]})]}):Object(b.jsx)("h3",{children:"No element for this product"})};var Ge=function(e){var t=e.token,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],s=a[1];return Object(b.jsxs)(he.a,{fluid:!0,children:[Object(b.jsx)("br",{}),Object(b.jsxs)(oe.a,{children:[Object(b.jsxs)(le.a,{children:[Object(b.jsx)("h2",{children:"Products Selection"}),Object(b.jsx)(K,{token:t,item:Me,spinner:h,url:"products",onSelect:function(e){s(c&&e._id===c._id?null:e)},sort:function(e,t){return e.name.localeCompare(t.name)}})]}),Object(b.jsx)(le.a,{children:c&&Object(b.jsx)(Xe,{token:t,productId:c._id})})]})]})};var Ke=function(e){return Object(b.jsxs)(Qe.a,{defaultActiveKey:"history",id:"StockManagerMenu",children:[Object(b.jsx)(Te.a,{eventKey:"product",title:"Products",children:Object(b.jsx)(Ye,{token:e.token})}),Object(b.jsx)(Te.a,{eventKey:"location",title:"Location",children:Object(b.jsx)(He,{token:e.token})}),Object(b.jsx)(Te.a,{eventKey:"history",title:"History",children:Object(b.jsx)(Ge,{token:e.token})})]})};var _e=function(e){var t=e.item,n=(e.onSelect,new Date(t.time));return Object(b.jsx)("div",{className:"LogListElement",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{width:"20%",children:t.user.email}),Object(b.jsx)("td",{width:"40%",children:n.toLocaleString("en-GB",{hour12:!1})}),Object(b.jsx)("td",{width:"20%",children:t.ip}),Object(b.jsx)("td",{width:"20%",children:t.userAgent.substring(0,t.userAgent.indexOf("/"))})]})})};var $e=function(e){var t=e.item,n=(e.onSelect,new Date(t.time));return Object(b.jsx)("div",{className:"LogListElement",children:Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{width:"20%",children:[" ",n.toLocaleString("en-GB",{hour12:!1})]}),Object(b.jsx)("td",{width:"20%",children:t.ip}),Object(b.jsx)("td",{width:"20%",children:t.userAgent.substring(0,t.userAgent.indexOf("/"))})]})})};var et=function(e){var t=e.user,n=e.token;return Object(G.a)(e,["user","token"]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:t.email}),Object(b.jsx)(K,{token:n,item:$e,spinner:h,url:"events/connections/user/"+t._id,refetch:t})]})};var tt=function(e){var t=e.token,n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],s=a[1];return Object(b.jsx)(he.a,{fluid:!0,children:Object(b.jsxs)(oe.a,{children:[Object(b.jsxs)(le.a,{children:[Object(b.jsx)("h2",{children:"User Connections"}),Object(b.jsx)(K,{token:t,item:_e,spinner:h,url:"events/connections/",queryOptions:"populateField=user&populateValue[user]=email&populateValue[user]=role&sort=-time"})]}),Object(b.jsxs)(le.a,{children:[Object(b.jsx)("h2",{children:"Select user for more details"}),Object(b.jsx)(K,{token:t,item:be,spinner:h,url:"users",onSelect:function(e){console.log("Selected"),console.log(e),s(c&&e._id===c._id?null:e)},sort:function(e,t){return e.role.localeCompare(t.role)||e.lastName.localeCompare(t.lastName)||e.firstName.localeCompare(t.firstName)}})]}),null!=c&&Object(b.jsx)(le.a,{children:Object(b.jsx)(et,{user:c,token:t})})]})})};var nt=function(e){var t,n,r,a,c,s=e.item;return e.onSelect,Object(b.jsxs)("div",{className:"ProductList",children:[null===s||void 0===s||null===(t=s.idElement)||void 0===t||null===(n=t.idProduct)||void 0===n?void 0:n.name," | ",new Date(null===s||void 0===s||null===(r=s.idElement)||void 0===r?void 0:r.exitDate).toLocaleString("en-gb",{year:"numeric",month:"numeric",day:"numeric"})," | ",null===s||void 0===s||null===(a=s.idElement)||void 0===a||null===(c=a.idLocation)||void 0===c?void 0:c.name]})};var rt=function(e){return Object(b.jsxs)("div",{className:"AlertManager",children:[Object(b.jsx)("em",{children:"Element are close to their limit date"}),Object(b.jsx)(K,{token:e.token,url:"alerts/elements",item:nt,queryOptions:""})]})};var at=function(e){var t=e.item;return e.onSelect,Object(b.jsxs)("div",{className:"ProductList",children:[t.idProduct.name," | less than ",t.idProduct.lowQuantity]})};var ct=function(e){var t=e.token;return Object(b.jsxs)("div",{className:"AlertManagerProduct",children:[Object(b.jsx)("h2",{children:"Low Quantity threshold"}),Object(b.jsx)(K,{token:t,item:at,spinner:h,url:"alerts/products/",queryOptions:"populateField=idProduct&populateValue[idProduct]=name&populateValue[idProduct]=lowQuantity"})]})};var st=function(e){var t=e.token;return Object(b.jsx)(he.a,{fluid:!0,children:Object(b.jsxs)(oe.a,{children:[Object(b.jsxs)(le.a,{children:[Object(b.jsx)("h2",{children:"Element alert"}),Object(b.jsx)(rt,{token:t})]}),Object(b.jsx)(le.a,{children:Object(b.jsx)(ct,{token:t})})]})})};var ot=function(e){return Object(b.jsx)("div",{children:Object(b.jsxs)(g.a,{children:[Object(b.jsx)(w,{handleLogOut:e.handleLogOut}),Object(b.jsxs)(y.c,{children:[Object(b.jsx)(y.a,{path:"/",exact:!0,component:function(){return Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"home",children:[Object(b.jsx)("br",{}),Object(b.jsxs)("h1",{children:["Welcome ",e.user.firstName]}),Object(b.jsxs)("p",{children:["This is your home page.",Object(b.jsx)("br",{}),"From here, you can access and manage different items"]}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{className:"row align-content-center",children:[Object(b.jsx)("div",{className:"col",children:Object(b.jsx)("div",{className:"card bg-dark mb-3",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h3",{className:"card-title",children:"Personal data"}),Object(b.jsxs)("p",{className:"card-text",children:["First Name: ",e.user.firstName,Object(b.jsx)("br",{}),"Last Name: ",e.user.lastName,Object(b.jsx)("br",{}),"Email: ",e.user.email,Object(b.jsx)("br",{}),"Role: ",e.user.role]})]})})}),Object(b.jsx)("div",{className:"col card bg-dark mb-3",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h3",{className:"card-title",children:"Management"}),Object(b.jsx)("p",{className:"card-text",children:"Click below to manage your item"}),Object(b.jsx)(g.b,{className:"nav-link btn btn-secondary",to:"/users",children:"Users"}),Object(b.jsx)("br",{}),Object(b.jsx)(g.b,{className:"nav-link btn btn-secondary",to:"/products",children:"Products"}),Object(b.jsx)("br",{}),Object(b.jsx)(g.b,{className:"nav-link btn btn-secondary",to:"/stocks",children:"Stocks"}),Object(b.jsx)("br",{}),Object(b.jsx)(g.b,{className:"nav-link btn btn-secondary",to:"/locations",children:"Locations"}),Object(b.jsx)("br",{}),Object(b.jsx)(g.b,{className:"nav-link btn btn-secondary",to:"/QR",children:"QR"}),Object(b.jsx)("br",{}),Object(b.jsx)(g.b,{className:"nav-link btn btn-secondary",to:"/logs",children:"Logs"}),Object(b.jsx)("br",{}),Object(b.jsx)(g.b,{className:"nav-link btn btn-secondary",to:"/alerts",children:"Alerts"})]})})]})]})})}}),Object(b.jsx)(y.a,{path:"/about",exact:!0,component:function(){return Object(b.jsx)(A,{})}}),Object(b.jsx)(y.a,{path:"/users",exact:!0,component:function(){return Object(b.jsx)(we,{token:e.token,user:e.user})}}),Object(b.jsx)(y.a,{path:"/products",exact:!0,component:function(){return Object(b.jsx)(ne,{token:e.token})}}),Object(b.jsx)(y.a,{path:"/locations",exact:!0,component:function(){return Object(b.jsx)(Be,{token:e.token})}}),Object(b.jsx)(y.a,{path:"/stocks",exact:!0,component:function(){return Object(b.jsx)(Ke,{token:e.token})}}),Object(b.jsx)(y.a,{path:"/QR",exact:!0,component:function(){return Object(b.jsx)(je,{token:e.token})}}),Object(b.jsx)(y.a,{path:"/logs",exact:!0,component:function(){return Object(b.jsx)(tt,{token:e.token})}}),Object(b.jsx)(y.a,{path:"/alerts",exact:!0,component:function(){return Object(b.jsx)(st,{token:e.token})}})]})]})})};var lt=function(){return Object(b.jsx)("footer",{className:"py-5 bg-dark fixed-bottom",id:"footer",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("p",{className:"m-0 text-center text-white",children:"Copyright \xa9 Stonks 2021"})})})};var it=function(){var e=Object(r.useState)({loggedIn:!1,user:{},token:""}),t=Object(o.a)(e,2),n=t[0],a=t[1],c=function(e){console.log(e),a(e),localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user))};return Object(r.useEffect)((function(){var e=localStorage.getItem("token");if(e){var t=e.split("."),n=JSON.parse(atob(t[1])),r=Date.now().valueOf()/1e3;n.exp<r?(localStorage.removeItem("token"),localStorage.removeItem("user")):a({token:e,user:JSON.parse(localStorage.getItem("user")),loggedIn:!0})}}),[]),Object(b.jsx)("div",{className:"App",children:n.loggedIn?Object(b.jsx)(ot,{user:n.user,token:n.token,handleLogOut:function(){localStorage.clear(),a({loggedIn:!1,user:{},token:""})}}):Object(b.jsxs)(g.a,{children:[Object(b.jsx)(k,{}),Object(b.jsxs)(y.c,{children:[Object(b.jsx)(y.a,{path:"/",exact:!0,component:function(){return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("br",{}),Object(b.jsx)("img",{src:S,alt:"Stonks logo",width:"200",height:"200"}),Object(b.jsx)("h1",{children:"Welcome to Stonks !"}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"row align-content-center",children:Object(b.jsxs)("div",{className:"col",children:[Object(b.jsx)("h2",{children:"Log-in"}),Object(b.jsx)(v,{handleChangeProps:c})]})})]})}}),Object(b.jsx)(y.a,{path:"/about",exact:!0,component:function(){return Object(b.jsx)(A,{})}})]}),Object(b.jsx)(lt,{})]})})},ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,436)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(it,{})}),document.getElementById("root")),ut()}},[[370,1,2]]]);
//# sourceMappingURL=main.02de831e.chunk.js.map